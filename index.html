<!-- Paste this in your index.html as-is -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <!-- Mobile Web App Capabilities -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="Ich liebe dich ♡">
    <meta name="theme-color" content="#6a1b9a">

    <title>Ich liebe dich ♡</title>

    <!-- iOS Icon -->
    <link rel="apple-touch-icon" href="us.png">

    <!-- Android Icon & Web Manifest -->
    <link rel="icon" type="image/png" href="us.png">
    <link rel="shortcut icon" href="us.png">
    <link rel="manifest" href="manifest.json">

    <!-- Your styles (unchanged) -->
    <style>
        /* all your original CSS stays here... */
    </style>
</head>
<body>
    <!-- Decorative GIFs (unchanged) -->
    <!-- ... -->
    <div id="app">
        <div id="quiz">
            <div class="question" id="question"></div>
            <div class="answers" id="answers"></div>
        </div>
        <div id="result" style="display: none">
            <div class="result" id="final-result"></div>
            <div class="gif-container">
                <img src="Celebrate.gif" alt="Congratulations!">
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script>
        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        const questionsOriginal = [
            { question: "How much do you love me?", answers: ["0", "JA! UNENDLICH JA!", "no", "1000"], correctIndex: 1 },
            { question: "Which is my favourite colour?", answers: ["red", "gelb", "pupor", "pinky"], correctIndex: 2 },
            { question: "WHO is my favourite Artist???", answers: ["Kanye nel prime", "Kendrick Lamar", "Frank Ocean", "Olivia Rodrigo"], correctIndex: 2 },
            { question: "Who is the my Favourite Person?", answers: ["IOIOIOIOIO", "Zelda", "Artù", "tu"], correctIndex: 3 },
            { question: "Welche deiner Katzen ist meine Lieblingskatze?", answers: ["Zelda", "Link"], correctIndex: 1 },
            { question: "Which is my favourite album EVER?", answers: ["DAMN.", "My Beautiful Dark Twisted Fantasy", "Blond", "Ye"], correctIndex: 2 },
            { question: "If I were an animal, what would I be?", answers: ["KITTY", "just a cat", "doggo", "foca :D"], correctIndex: 0 },
            { question: "What food do I never say no to?", answers: ["Ramen", "Mc", "Burrito", "Whatever you say beautiful"], correctIndex: 3 },
            { question: "If I had one brain cell left, what would I use it for?", answers: ["Eating", "Playing Minecraft", "Sleeping", "Complaining"], correctIndex: 1 },
            { question: "What is the speed of light?", answers: ["c", "343m/s", "299792458 m/s", "300924500 m/s"], correctIndexes: [0, 2] },
            { question: "are you the loml?", answers: ["yes of course", "fuck yes", "Fuck You"], correctIndexes: [0, 1] }
        ];

        let questions = JSON.parse(JSON.stringify(questionsOriginal));
        questions = shuffle(questions);
        questions.forEach(q => {
            let answersWithIndex = q.answers.map((ans, idx) => ({ ans, idx }));
            answersWithIndex = shuffle(answersWithIndex);
            q.answers = answersWithIndex.map(item => item.ans);
            const originalCorrect = Array.isArray(q.correctIndexes) ? q.correctIndexes : [q.correctIndex];
            q.correctIndexes = originalCorrect.map(origIdx => answersWithIndex.findIndex(item => item.idx === origIdx));
        });

        let current = 0;
        let wrongCount = 0;

        function renderQuestion() {
            if (current >= questions.length) {
                document.getElementById("quiz").style.display = "none";
                document.getElementById("result").style.display = "block";

                let feedback = "";
                switch (wrongCount) {
                    case 1:
                    case 2:
                    case 3:
                    case 4:
                        feedback = "HAPPY BIRTHDAY I LOVE YOU SO MUCH!!";
                        break;
                    case 5:
                    case 6:
                        feedback = "Have you even tried?";
                        break;
                    default:
                        feedback = "HAPPY BIRTHDAY I LOVE YOU SO MUCH!!";
                }

                // Only show wrong count if >= 5
                const message = wrongCount >= 5
                    ? `${feedback} -- ${wrongCount} wrong out of ${questions.length}.`
                    : feedback;

                document.getElementById("final-result").textContent = message;
                return;
            }

            const q = questions[current];
            document.getElementById("question").textContent = q.question;
            const answersDiv = document.getElementById("answers");
            answersDiv.innerHTML = "";

            q.answers.forEach((answer, index) => {
                const btn = document.createElement("button");
                btn.textContent = answer;

                btn.onclick = () => {
                    const isCorrect = q.correctIndexes.includes(index);
                    if (!isCorrect) {
                        wrongCount++;
                        btn.style.background = "#c62828";
                        btn.parentElement.parentElement.classList.add("shake");
                        setTimeout(() => {
                            btn.parentElement.parentElement.classList.remove("shake");
                            current++;
                            renderQuestion();
                        }, 600);
                    } else {
                        btn.style.background = "#2e7d32";
                        confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 } });
                        setTimeout(() => {
                            current++;
                            renderQuestion();
                        }, 600);
                    }
                };

                answersDiv.appendChild(btn);
            });
        }

        const confetti = window.confetti || function () {};
        renderQuestion();
    </script>
</body>
</html>
